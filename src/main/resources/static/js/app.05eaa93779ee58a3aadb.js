webpackJsonp([3],{"2sCa":function(t,e){},A0XR:function(t,e){},Dlbp:function(t,e){},LicG:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("IvJb"),r={name:"headerbox",data:function(){return{navdata:"",login:!0}},created:function(){var t=this.$route;this.navdata=t.name,this.gettoken()},methods:{wxlogin:function(){location.href="http://139.224.22.192/c/#/login"},gettoken:function(){var t=this.DATAFORM.gettoken();console.log(t),t.token&&t.corpKey&&(this.login=!1)}},watch:{$route:function(){var t=this.$route;this.gettoken(),t.name&&(this.navdata=t.name)}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"headerbox"},[a("div",{staticClass:"header"},[a("div",{staticClass:"logo"},[t._v("业务商城")]),t._v(" "),a("ul",{staticClass:"right_list"},[a("li",[a("em",{staticStyle:{"font-style":"normal","font-weight":"initial",position:"relative",top:"-1px"}},[t._v(" | ")]),t.login?a("span",{on:{click:t.wxlogin}},[t._v("登录")]):a("router-link",{attrs:{tag:"span",to:"/"}},[t._v("管理")])],1),t._v(" "),a("li",[t._v("开发文档")]),t._v(" "),a("li",{staticClass:"on"},[t._v("应用市场")])])])])},staticRenderFns:[]};var o={name:"App",data:function(){return{nav_header:!1}},components:{vuenav:a("C7Lr")(r,i,!1,function(t){a("2sCa")},null,null).exports,subnav:a("gORT").default},mounted:function(){},created:function(){this.routedata();var t=this;window.onload=function(){t.DATAFORM.dataform({_this:t})}},methods:{routedata:function(){var t=this.DATAFORM.gettoken();t.token&&t.corpKey||this.$router.push("/login"),"login"==this.$route.name?this.nav_header=!1:this.nav_header=!0}},watch:{$route:function(t,e){this.routedata(),this.DATAFORM.dataform({_this:this})}}},s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[this.nav_header?e("div",{staticClass:"hellobox"},[e("subnav"),this._v(" "),e("router-view",{attrs:{name:"page"}})],1):e("div",[e("vuenav"),this._v(" "),e("router-view")],1)])},staticRenderFns:[]};var c=a("C7Lr")(o,s,!1,function(t){a("TiDv")},null,null).exports,l=a("KGCO"),u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"index"},[a("div",{staticClass:"header_s"},[a("img",{staticClass:"logo_s",attrs:{src:t.userData.logo}}),t._v(" "),a("div",{staticClass:"company_name"},[a("div",{staticClass:"name"},[t._v(t._s(t.userData.name)+"\n\t\t\t\t"),t.userData.name?a("span",[t._v("已认证")]):t._e()]),t._v(" "),t.userData.id?a("div",{staticClass:"corpid"},[t._v("Corpid: \n\t\t\t\t"),a("span",[t._v(t._s(t.userData.id))])]):t._e(),t._v(" "),t.userData.id?a("div",{staticClass:"corpid"},[t._v("appSecret: \n\t\t\t\t"),a("span",[t._v(t._s(t.userData.appSecret))])]):t._e()])])])},staticRenderFns:[]};var d=a("C7Lr")({name:"index",data:function(){return{data_list:[],userData:{}}},created:function(){var t=this;this.DATAFORM.getuserdata().then(function(e){t.userData=e})},watch:{$route:function(t,e){}},methods:{openoff:function(t){}},mounted:function(){}},u,!1,function(t){a("WN38")},"data-v-87643920",null).exports,p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login"},[t._m(0),t._v(" "),a("div",{staticClass:"con_select_box"},[a("ul",{staticClass:"con_select"},t._l(t.app_list,function(e){return a("li",[a("img",{staticClass:"image",attrs:{src:e.logo}}),t._v(" "),a("div",{staticClass:"detail"},[a("div",{staticClass:"title_s"},[t._v(t._s(e.name))]),t._v(" "),a("div",{staticClass:"subtitle_s"}),t._v(" "),a("div",{staticClass:"text_tip"},[t._v(t._s(e.brief))])]),t._v(" "),e.hasInstall?a("div",{staticClass:"button_s",staticStyle:{background:"#8C939D"}},[t._v("已安装")]):a("div",{staticClass:"button_s",on:{click:function(a){t.shoping(e.id)}}},[t._v("安装应用")])])}))])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"bannerbox"},[e("div",{staticClass:"banner"})])}]};var h=a("C7Lr")({name:"login",data:function(){return{username:"",password:"",avail:0,app_list:[]}},created:function(){this.getdata(),this.DATAFORM.dataform({_this:this})},mounted:function(){},methods:{shoping:function(t){var e=this;this.DATAFORM.corpApp({url:"oa/microapp/choose",data:{ids:[t]},method:"post"}).then(function(t){e.getdata(),e.$Message.success("添加成功")})},getdata:function(){var t=this;this.DATAFORM.request({url:"microapp/shop"}).then(function(e){var a=e.data.developer||[];t.app_list=a})}}},p,!1,function(t){a("Ubbb")},null,null).exports,v={name:"work",data:function(){var t=this;return{page:0,content:[{key:"id",title:"id",align:"center"},{key:"logo",title:"图标",width:100,align:"center",render:function(t,e){return t("Avatar",{props:{src:e.row.logo}})}},{key:"name",align:"center",title:"名称"},{key:"homepageUrl",title:"微应用首页",align:"center",render:function(t,e){return t("a",{domProps:{href:e.row.homepageUrl}},e.row.homepageUrl)}},{key:"ompLink",title:"微应用后台",align:"center",render:function(t,e){return t("a",{domProps:{href:e.row.ompLink}},e.row.ompLink)}},{key:"pcHomepageUrl",title:"微应用管理后台",align:"center",render:function(t,e){return t("a",{domProps:{href:e.row.pcHomepageUrl}},e.row.pcHomepageUrl)}},{key:"brief",align:"center",title:"简介"},{key:"action",title:"审核状态",align:"center",render:function(t,e){var a=Number(e.row.status),n="审核中";switch(a){case 0:n="草稿";break;case 1:n="审核中";break;case 2:n="审核通过";break;case 3:n=e.row.refuseReason;break;case 4:n="停用";break;case 5:n="发布"}return 3==a?t("div",[t("div",{style:{color:"red"}},"审核拒绝"),t("div",n)]):t("span",n)}},{key:"action",title:"管理",align:"center",render:function(e,a){var n=t;return e("div",[e("Button",{props:{type:"info",size:"small"},style:{marginRight:"10px"},on:{click:function(){n.$router.push("/service/create?id="+a.row.id)}}},"修改"),e("Button",{props:{type:"error",size:"small"},on:{click:function(){n.$Modal.confirm({title:"提示",content:"确定要删除"+a.row.name,onOk:function(){n.DATAFORM.request({url:"use/microapp/delete",data:{appId:a.row.id},method:"post"}).then(function(t){n.getlist(),console.log(t),n.$Message.success("删除成功")})}})}}},"删除")])}}],content_data:{data:[]}}},created:function(){this.getlist()},methods:{add_app:function(){this.$router.push("/service/create")},getlist:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.page;this.DATAFORM.request({url:"use/microapp/list",data:{pageNo:e,pageSize:10}}).then(function(e){t.content_data=e.data,console.log(e)})},pages:function(t){this.getlist(t-1)}},watch:{$route:function(){this.DATAFORM.dataform().addapp&&(this.getlist(),this.DATAFORM.dataform({addapp:!1}))}}},f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"service_content"},[a("div",{staticClass:"service_header"},[a("Button",{staticClass:"button_s",on:{click:t.add_app}},[t._v("添加应用")])],1),t._v(" "),a("div",[a("Table",{ref:"contentlist",attrs:{width:"100%",columns:t.content,data:t.content_data.data}})],1),t._v(" "),a("div",{staticStyle:{"margin-top":"10px",overflow:"auto"}},[a("Page",{staticStyle:{float:"right"},attrs:{total:t.content_data.total,"page-size":10},on:{"on-change":t.pages}})],1),t._v(" "),a("transition",{attrs:{name:"cardshow"}},[a("router-view")],1)],1)},staticRenderFns:[]};var g=a("C7Lr")(v,f,!1,function(t){a("Dlbp")},null,null).exports,m={name:"work",data:function(){return{content:[{key:"id",align:"center",title:"appid"},{key:"appSecret",align:"center",title:"appSecret"},{key:"name",align:"center",title:"姓名"},{key:"logo",title:"头像",align:"center",render:function(t,e){return t("Avatar",{props:{src:e.row.logo}})}},{key:"telephone",align:"center",title:"手机"},{key:"brief",align:"center",title:"简介"}],content_data:[]}},created:function(){this.getlist()},methods:{add_app:function(){this.$router.push("/work/create")},getlist:function(){var t=this;this.DATAFORM.request({url:"use/get/current"}).then(function(e){t.content_data=e.data.data,console.log(e)})}},watch:{$route:function(){this.DATAFORM.dataform().addapp&&(this.getlist(),this.DATAFORM.dataform({addapp:!1}))}}},_={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"service_content"},[e("div",{staticClass:"service_header"}),this._v(" "),e("div",[e("Table",{ref:"contentlist",attrs:{height:"620",width:"100%",columns:this.content,data:this.content_data}})],1),this._v(" "),e("transition",{attrs:{name:"cardshow"}},[e("router-view")],1)],1)},staticRenderFns:[]};var k=a("C7Lr")(m,_,!1,function(t){a("A0XR")},null,null).exports;n.default.use(l.a);var w=new l.a({routes:[{path:"/",name:"index",components:{page:d},children:[{path:"hello",name:"hello",component:function(t){return new Promise(function(t){t()}).then(function(){var e=[a("gORT")];t.apply(null,e)}.bind(this)).catch(a.oe)}}]},{path:"/login",name:"login",component:h},{path:"/service",name:"service",components:{page:g},children:[{path:"create",name:"",component:function(t){return a.e(1).then(function(){var e=[a("6w+l")];t.apply(null,e)}.bind(this)).catch(a.oe)}}]},{path:"/work",name:"work",components:{page:k},children:[{path:"create",name:"",component:function(t){return a.e(0).then(function(){var e=[a("agcO")];t.apply(null,e)}.bind(this)).catch(a.oe)}}]}]}),C=(a("L7Pj"),a("ibX8")),b={render:function(){var t=this.$createElement;return(this._self._c||t)("div")},staticRenderFns:[]};var A=function(t){a("p6KC")},y=a("C7Lr")(C.a,b,!1,A,null,null).exports,$=a("OFNa"),D=a.n($),M=(a("SMjw"),a("DVuL")),R=a.n(M);a("LicG");n.default.use(R.a),n.default.use(D.a),n.default.config.productionTip=!1,n.default.prototype.DATAFORM=y,new n.default({el:"#app",router:w,components:{App:c},template:"<App/>"})},SMjw:function(t,e){},TiDv:function(t,e){},Ubbb:function(t,e){},WN38:function(t,e){},"c/lV":function(t,e){},gORT:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={name:"hello",data:function(){return{userData:{},navdata:""}},created:function(){var t=this,e=1,a=setInterval(function(){e++,t.DATAFORM.dataform().userdata&&(t.userData=t.DATAFORM.dataform().userdata,clearInterval(a)),e>40&&clearInterval(a)},500),n=this.$route.path;(n=n.split("/")).length>=2&&(this.navdata=n[1]),console.log(n)},methods:{back:function(){document.cookie="login=;domain=163.53.168.238;path=/",document.cookie="corpid=;domain=163.53.168.238;path=/",this.DATAFORM.dataform({userdata:""}),this.$router.push("/login")}},watch:{$route:function(){var t=this.$route.path;(t=t.split("/")).length>=2&&(this.navdata=t[1])}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("router-link",{staticClass:"logo",attrs:{tag:"div",to:"/login"}},[t._v("业务商城")]),t._v(" "),a("ul",{staticClass:"nav_left"},[a("router-link",{class:{on:""==t.navdata},attrs:{tag:"li",to:"/"}},[t._v("首页")]),t._v(" "),a("router-link",{class:{on:"service"==t.navdata},attrs:{tag:"li",to:"/service"}},[t._v("服务管理")])],1),t._v(" "),a("ul",{staticClass:"nav_left nav_right"},[a("li",{on:{click:t.back}},[t._v("退出")]),t._v(" "),a("li",[t._v(t._s(t.userData.name))])])],1)},staticRenderFns:[]};var i=a("C7Lr")(n,r,!1,function(t){a("c/lV")},"data-v-887e7bd2",null);e.default=i.exports},ibX8:function(t,e,a){"use strict";(function(t){var n=a("3cXf"),r=a.n(n),i=a("rVsN"),o=a.n(i),s=a("aA9S"),c=a.n(s),l="http://139.224.22.192/api/sso/",u="http://139.224.22.192/api/app/",d="",p={};function h(){var t=document.cookie,e={};return(t=t.split(";")).forEach(function(t){var a=t.split("=");" login"!=a[0]&&"login"!=a[0]||(e.token=a[1])," corpid"!=a[0]&&"corpid"!=a[0]||(e.corpKey=a[1])}),e}function v(e){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return d&&d.$Loading.start(),new o.a(function(n,i){var o=h();e.login?e.login=!0:e.login=!1;var s=void 0;s=a?l:u;var p={type:e.method||"get",url:s+e.url,async:!0,headers:o,data:e.data?e.data:{},dataType:"json",success:function(t){if(d&&d.$Loading.finish(),"34001"!=t.code&&"34001"!=t.errcode||t.login)"ok"==t.errmsg?n(t):d.$Message.info({content:t.errmsg,duration:10,closable:!0});else{alert("登录已过期");location.href="http://139.224.22.192/admin/#/login"}},error:function(t,e,a){i(e),d&&(d.$Loading.error(),d.$Message.error(e)),console.error(e)}};"post"==e.method&&(p=c()(p,{contentType:"application/json; charset=utf-8",data:r()(e.data?e.data:{})})),t.ajax(p)})}e.a={dataform:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t._this&&(d=t._this),c()(p,t)},request:v,getuserdata:function(){return p.userdata?new o.a(function(t,e){t(p.userdata)}):new o.a(function(t,e){v({url:"use/get/current"}).then(function(e){"40000"==e.errcode&&"ok"==e.errmsg&&(t(e.data),p.userdata=e.data)})})},gettoken:h,jqueryajax:function(e){return d&&d.$Loading.start(),new o.a(function(a,n){h();var i={type:e.method||"get",url:u+e.url,async:!0,data:e.data?e.data:{},dataType:"json",success:function(t){d&&d.$Loading.finish(),"ok"==t.errmsg?a(t):d.$Message.info({content:t.errmsg,duration:10,closable:!0})},error:function(t,e,a){n(e),d&&(d.$Loading.error(),d.$Message.error(e)),console.error(e)}};"post"==e.method&&(i=c()(i,{contentType:"application/json; charset=utf-8",data:r()(e.data?e.data:{})})),t.ajax(i)})},corpApp:function(e){return d&&d.$Loading.start(),new o.a(function(a,n){var i=h(),o={type:e.method||"get",url:"http://139.224.22.192/api/corp/"+e.url,async:!0,headers:i,data:e.data?e.data:{},dataType:"json",success:function(t){d&&d.$Loading.finish(),"34001"!=t.code&&"34001"!=t.errcode||t.login?"ok"==t.errmsg?a(t):d.$Message.info({content:t.errmsg,duration:10,closable:!0}):(alert("请登录"),location.href="http://163.53.168.238:19999/c/#/login")},error:function(t,e,a){n(e),d&&(d.$Loading.error(),d.$Message.error(e)),console.error(e)}};"post"==e.method&&(o=c()(o,{contentType:"application/json; charset=utf-8",data:r()(e.data?e.data:{})})),t.ajax(o)})},formreg:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";for(var n in t)if(""==t[n]&&e[n])return d.$Message.warning(e[n]);return!(!a||/^1[3|4|5|6|7|8]\d{9}$/.test(t[a]))&&d.$Message.warning("手机号码格式不正确")}}}).call(e,a("L7Pj"))},p6KC:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.05eaa93779ee58a3aadb.js.map